# ğŸ› ï¸ Automa CLI â€” AutomaÃ§Ãµes do dia a dia

Uma CLI leve e poderosa para automaÃ§Ãµes cotidianas: **organizar downloads, renomear arquivos em massa, gerar relatÃ³rios de gastos e fazer backup**.

**Status**: 4 comandos implementados | 11 testes passando | Pronto para PyPI

---

## âœ¨ Features

- âœ… **Organize**: Categorize arquivos por tipo (Imagens, Documentos, ZIP, Ãudio, VÃ­deo, CÃ³digo)
- âœ… **Rename**: Converta nomes para slug (minÃºsculo, hÃ­fen, sem caracteres estranhos)
- âœ… **Expenses**: Gere relatÃ³rios de gastos (CSV â†’ tabela â†’ export)
- âœ… **Backup**: FaÃ§a backup recursivo com filtros e modo incremental
- âœ… Todas com `--dry-run` por padrÃ£o (seguranÃ§a primeiro)
- âœ… Preview em tabelas bonitas (Rich)
- âœ… Suporte a `--recursive`, `--exclude`, `--apply`
- âœ… Resumos com contagem e tamanho total

---

## ğŸ“¦ InstalaÃ§Ã£o

### PrÃ©-requisitos

- Python 3.10+
- pip

### OpÃ§Ã£o 1: Instalar do repositÃ³rio (desenvolvimento)

```bash
git clone https://github.com/KethelenParra/automa-cli.git
cd automa-cli
python -m venv .venv

# Windows:
.venv\Scripts\activate
# Linux/Mac:
source .venv/bin/activate

pip install -e .
```

Depois use de qualquer diretÃ³rio:

```bash
automa --help
```

### OpÃ§Ã£o 2: Instalar via pip (quando publicado no PyPI)

```bash
pip install automa-cli
automa --help
```

---

## ğŸš€ Uso RÃ¡pido

### 1ï¸âƒ£ Organizar Downloads

Categorize arquivos por tipo (Imagens, Documentos, Archives, etc).

```bash
# Preview (recomendado primeiro)
automa organize by-type "C:\Users\kethe\Downloads" --dry-run

# Aplicar de verdade
automa organize by-type "C:\Users\kethe\Downloads" --apply

# Recursivo (entra em subpastas)
automa organize by-type "C:\Users\kethe\Downloads" --recursive --apply

# Ignorar certas pastas
automa organize by-type "C:\Users\kethe\Downloads" --ignore ".git" --ignore "node_modules" --apply
```

**Output esperado:**

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Arquivo        â”ƒ Destino    â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ photo.png      â”‚ Images/    â”‚
â”‚ report.pdf     â”‚ Documents/ â”‚
â”‚ archive.zip    â”‚ Archives/  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total de arquivos: 3 â€” Tamanho total: 5,234,567 bytes
Dry-run ativo. Use --apply para mover de verdade.
```

---

### 2ï¸âƒ£ Renomear em Massa

Converta nomes para slug (minÃºsculo, hÃ­fen, sem caracteres especiais).

```bash
# Preview
automa rename slug "C:\Meus Documentos" --dry-run

# Aplicar
automa rename slug "C:\Meus Documentos" --apply

# Recursivo
automa rename slug "C:\Meus Documentos" --recursive --apply
```

**Exemplos de transformaÃ§Ã£o:**

- `My File.TXT` â†’ `my-file.txt`
- `RelatÃ³rio 2026!.pdf` â†’ `relatÃ³rio-2026.pdf`
- `AÃ§Ã£o & Resultado.docx` â†’ `aÃ§Ã£o-resultado.docx`

---

### 3ï¸âƒ£ RelatÃ³rio de Gastos

Analise gastos a partir de CSV (data, descriÃ§Ã£o, categoria, valor).

**Formato esperado do CSV:**

```csv
data,descricao,categoria,valor
2026-02-01,Uber,Transporte,23.90
2026-02-02,CafÃ©,AlimentaÃ§Ã£o,10.00
2026-02-03,Ã”nibus,Transporte,5.50
2026-02-10,Pizzaria,AlimentaÃ§Ã£o,45.00
```

**Comandos:**

```bash
# RelatÃ³rio completo (terminal)
automa expenses report gastos.csv

# Filtrar por mÃªs
automa expenses report gastos.csv --month 2026-02

# Mostrar apenas top 3 categorias
automa expenses report gastos.csv --top 3

# Exportar relatÃ³rio para CSV
automa expenses report gastos.csv --output relatorio.csv

# Sem mostrar quantidade de lanÃ§amentos
automa expenses report gastos.csv --show-counts=false
```

**Output esperado:**

```
Total: R$ 84.40

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Categoria      â”ƒ Valor       â”ƒ LanÃ§amentos  â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ AlimentaÃ§Ã£o    â”‚ R$ 55.00    â”‚ 2            â”‚
â”‚ Transporte     â”‚ R$ 29.40    â”‚ 2            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4ï¸âƒ£ Backup AutomÃ¡tico

FaÃ§a backup recursivo com filtros e modo incremental.

```bash
# Preview
automa backup run "./Documentos" "./Backups" --dry-run

# Aplicar
automa backup run "./Documentos" "./Backups" --apply

# Excluir tipos de arquivo
automa backup run "./Docs" "./Backups" --exclude "*.tmp" --exclude "*.cache" --apply

# Modo full (copia tudo, nÃ£o incremental)
automa backup run "./Docs" "./Backups" --full --apply

# Incremental (padrÃ£o: compara tamanho)
automa backup run "./Docs" "./Backups" --incremental --apply
```

**Output esperado:**

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Arquivo    â”ƒ Destino      â”ƒ Tamanho  â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”©
â”‚ file1.txt  â”‚ Backups/file â”‚ 1,024 B  â”‚
â”‚ file2.pdf  â”‚ Backups/file â”‚ 512 KB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Arquivos a copiar: 2 â€” Tamanho total: 525,312 bytes
Dry-run ativo. Use --apply para copiar de verdade.
```

---

## ğŸ”§ OpÃ§Ãµes Globais

Todos os comandos suportam:

| Flag                | DescriÃ§Ã£o                               |
| ------------------- | --------------------------------------- |
| `--dry-run`         | (padrÃ£o) Simula sem alterar nada        |
| `--apply`           | Executa de verdade                      |
| `--help`            | Mostra ajuda do comando                 |
| `-r`, `--recursive` | Procura em subpastas (organize, rename) |
| `-e`, `--exclude`   | Exclui padrÃµes (repetir para mÃºltiplos) |

---

## ğŸ“‹ Comandos DisponÃ­veis

```bash
automa --help                          # Mostra todos os subcomandos
automa version                         # Mostra versÃ£o
automa organize --help                 # Ajuda do organize
automa rename --help                   # Ajuda do rename
automa expenses --help                 # Ajuda do expenses
automa backup --help                   # Ajuda do backup
```

---

## ğŸ§ª Testes

Execute a suÃ­te de testes (11 testes, todos passando):

```bash
python -m pytest -v

# Rodando no .venv:
.venv\Scripts\python.exe -m pytest -v
```

**Output esperado:**

```
tests/test_organize.py::test_organize_by_type_dry_run PASSED
tests/test_organize.py::test_organize_recursive_and_ignore PASSED
tests/test_organize.py::test_organize_apply_handles_duplicates PASSED
tests/test_rename.py::test_rename_slug_dry_run PASSED
tests/test_rename.py::test_rename_slug_apply_handles_conflict PASSED
tests/test_expenses.py::test_expenses_report_basic PASSED
tests/test_expenses.py::test_expenses_export_csv PASSED
tests/test_backup.py::test_backup_dry_run PASSED
tests/test_backup.py::test_backup_apply PASSED
tests/test_backup.py::test_backup_exclude PASSED
tests/test_backup.py::test_backup_incremental PASSED

===== 11 passed in 0.92s =====
```

---

## ğŸ“ Estrutura do Projeto

```
automa-cli/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ automa_cli/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ cli.py              # Ponto de entrada principal
â”‚       â””â”€â”€ command/
â”‚           â”œâ”€â”€ organize.py     # Categorizar por tipo
â”‚           â”œâ”€â”€ rename.py       # Slug + renomear
â”‚           â”œâ”€â”€ expenses.py     # RelatÃ³rio CSV
â”‚           â””â”€â”€ backup.py       # Backup com filtros
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_organize.py
â”‚   â”œâ”€â”€ test_rename.py
â”‚   â”œâ”€â”€ test_expenses.py
â”‚   â””â”€â”€ test_backup.py
â”œâ”€â”€ pyproject.toml              # ConfiguraÃ§Ã£o e dependÃªncias
â”œâ”€â”€ README.md                   # Este arquivo
â””â”€â”€ .gitignore                  # Arquivos para ignorar no Git
```

---

## ğŸš€ Publicar no PyPI (pÃ³s-release)

Quando quiser publicar no PyPI:

```bash
# 1) Instalar ferramentas de build
pip install build twine

# 2) Gerar distribuiÃ§Ã£o
python -m build

# 3) Upload (depois de criar conta em pypi.org)
python -m twine upload dist/*
```

Depois qualquer um instala com:

```bash
pip install automa-cli
```

---

## ğŸ’¡ Exemplos de Uso Real

### Organizar Downloads apÃ³s o mÃªs

```bash
automa organize by-type "C:\Users\kethe\Downloads" --dry-run
# Revisar o preview
automa organize by-type "C:\Users\kethe\Downloads" --apply
```

### Renomear arquivos de um projeto antigo

```bash
automa rename slug "C:\Projetos\VelhoProjeto" --recursive --dry-run
automa rename slug "C:\Projetos\VelhoProjeto" --recursive --apply
```

### Gerar relatÃ³rio mensal de gastos

```bash
automa expenses report gastos.csv --month 2026-02 --top 5 --output relatorio_fev.csv
```

### Fazer backup seguro (incremental)

```bash
automa backup run "C:\Meus Documentos" "D:\Backup" --exclude "*.tmp" --exclude ".git" --dry-run
automa backup run "C:\Meus Documentos" "D:\Backup" --exclude "*.tmp" --exclude ".git" --apply
```

---

## ğŸ“ DependÃªncias

- **typer** >= 0.12 â€” Framework para CLI
- **rich** >= 13.0 â€” SaÃ­da bonita (tabelas, cores)
- **pandas** >= 2.0 â€” AnÃ¡lise de dados (CSV)
- **python-dateutil** >= 2.8 â€” Parsing de datas

---

## ğŸ› Problemas Comuns

### Erro: "automa: command not found"

- Certifique-se de ativar o venv: `source .venv/bin/activate` (Linux/Mac) ou `.venv\Scripts\activate` (Windows)
- Ou instale com `pip install -e .` na pasta do projeto.

### Erro: "No module named 'automa_cli'"

- VocÃª estÃ¡ tentando rodar o script de um local diferente sem ativar o .venv?
- Use o caminho completo do Python:
  ```bash
  C:/Users/kethe/repository/automa-cli/.venv/Scripts/python.exe -m automa_cli.cli organize by-type "C:\Downloads" --dry-run
  ```

### Arquivo jÃ¡ existe no destino (organize/rename)

- O comando automaticamente adiciona sufixo ` (1)`, ` (2)`, etc.
- NÃ£o hÃ¡ conflitos â€” arquivos sÃ£o renomeados com seguranÃ§a.

### Backup incremental nÃ£o funciona como esperado

- Use `--full` para copiar tudo, independente de tamanho
- Incremental (padrÃ£o) apenas copia se o tamanho for diferente

---

## ğŸ“„ LicenÃ§a

MIT License â€” Sinta-se livre para usar, modificar e distribuir.

---

## ğŸ‘¨â€ğŸ’» ContribuiÃ§Ãµes

SugestÃµes, correÃ§Ãµes e pull requests sÃ£o bem-vindas!

```bash
git clone https://github.com/KethelenParra/automa-cli.git
cd automa-cli
python -m venv .venv
source .venv/bin/activate  # ou .venv\Scripts\activate no Windows
pip install -e ".[dev]"
pytest
git checkout -b feature/sua-feature
# ... trabalhe ...
git push origin feature/sua-feature
```

---

## ğŸ“ Suporte

Encontrou um problema? Abra uma [issue no GitHub]().

---

**Made with â¤ï¸ para automaÃ§Ãµes do dia a dia.**
